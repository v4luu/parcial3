{"filter":false,"title":"parcial.py","tooltip":"/lambda1/parcial.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":35,"column":5},"action":"insert","lines":["import json","import boto3","import requests","from datetime import datetime","","s3 = boto3.client('s3')","BUCKET_NAME = 'parci4l3'","","def lambda_handler(event, context):","    now = datetime.utcnow().strftime('%Y-%m-%d')","    urls = {","        'eltiempo': 'https://www.eltiempo.com',","        'publimetro': 'https://www.publimetro.co/'","    }","","    for name, url in urls.items():","        try:","            response = requests.get(url, timeout=10)","            response.raise_for_status()","            content = response.text","","            key = f\"headlines/raw/{name}-contenido-{now}.html\"","            s3.put_object(","                Bucket=BUCKET_NAME,","                Key=key,","                Body=content,","                ContentType='text/html'","            )","        except Exception as e:","            print(f\"Error scraping {url}: {str(e)}\")","            continue","","    return {","        'statusCode': 200,","        'body': json.dumps('Scraping completado exitosamente')","    }"],"id":1}]]},"ace":{"folds":[],"scrolltop":18,"scrollleft":0,"selection":{"start":{"row":35,"column":5},"end":{"row":35,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":0,"state":"start","mode":"ace/mode/python"}},"timestamp":1748555260453,"hash":"d9bd1f4a4e5c3e720c206917bde2dbf2b4acd463"}